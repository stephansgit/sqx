---
title: "Volumen Breakout Tool - End of Day"
---


```{r load, include=FALSE}
knitr::opts_chunk$set(warning=FALSE, message=FALSE, echo=FALSE)


options("getSymbols.warning4.0"=FALSE)
suppressPackageStartupMessages(library(googleVis))
library(xts)
library(quantmod)
library(googleVis)
library(ggplot2)
library(reshape2)
library(bdscale)
library(RColorBrewer)
#library(RGoogleDocs)
library(knitr)


op <- options(gvis.plot.tag='chart')

# Lies Funktionen ein
source(file="01_functions.R")

# Lies Parameter ein
source(file="02_parameters.R")

# Lies Ticker-Symbole ein
source(file="03_ticker.R")

# Lies EOD-Daten von Yahoo
source(file="04_load_EOD.R", echo=FALSE, verbose=FALSE)

# Lies die erarbeiteten Daten ein 
load(file="data/EOD-Data.RData")

# Berechne den VB-Wert
de_vbt <- vb_calc(de_vol, lookback)


```

Das Tool identifziert Aktien mit einem Volumenausbruch. Details siehe [hier](http://sqx.servebeer.com/vbt/methode.html).  


### Daten

```Letzte Ausführung: `r Sys.time()` ```   
```Eingelesene Werte: `r dim(de_vbt)[2]` ```  
```Letzter berücksichtigter Close: `r end(de_vbt)` ```   

``` `r length(setdiff(stocks_requested, stocks_loaded))` ``` Werte konnten nicht eingelesen werden:     
``` `r setdiff(stocks_requested, stocks_loaded)` ```  

Berücksichtigung der letzten `r lookback` Handelstage.


### Ergebnisse  

```{r last}
signals <- calc_signal(vb_vector=de_vbt, trigger=trigger)
```

Die folgenden Aktien haben am vergangen Closing einen $VB$-Wert von __über__ `r trigger` gezeigt (was einem Volumen über dem `r trigger`fachen Durchschnittsvolumen entspricht bei gleichzeitiger Aufwärtsbewegung des Preises):  

```{r table_vbts, results='asis'}
kable(merge(data.frame(Ticker=signals$signal_up), fullnames))
```

(_Leer_ bedeutet, dass kein Wert den Volumendurchschnitt 'durchbrochen' hat.)  

_Beachte: Tickersymbolen, die mit einer Zahl beginnen, werden momentan noch mit einem X versehen - daher wird auch ihr Klarname nicht richtig gefunden._

### Charts  

Für die gefundenen Werte werden die Charts dargestellt.  

__Charts für Werte mit VB > +3:__

```{r charts1}
for (i in 1:length(signals$signal_up)) {
  try(
    chartSeries(get(signals$signal_up[i], envir=stocks), subset='last 4 months', name=signals$signal_up[i]) 
    )
}
```
.    
-----
  
__Charts für Werte mit VB < -3:__

```{r charts2}
for (i in 1:length(signals$signal_dn)) {
  try(
    chartSeries(get(signals$signal_dn[i], envir=stocks), subset='last 4 months', name=signals$signal_dn[i]) 
    )
}
```
  
  
.  
-----  

### Tabelle  

Die Tabelle zeigt die VB-Werte für die letzten fünf Handelstage an. 
Klicken auf die Spaltenköpfe sortiert die Werte und man kann bspw. Werte über drei identifizieren.

```{r plot_tbl, results='asis'}
table <- data.frame(fullnames,          
                      t(tail(round(de_vbt,2),5)))
names(table)[-c(1:2)] <- as.character(index(tail(de_vbt,5)))
Table <- gvisTable(table)
plot(Table)
```

NB:  
Bei Werten, deren Tickersymbol mit einer Zahl beginnt (bspw. 8GS.DE (China Spec Glass)), stellt das Tool fälschlicherweise ein "X" vor das Tickersymbol.



-----
``` `r Sys.time()` ```   

END OF FILE
